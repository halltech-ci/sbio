<odoo>
  <data>
    <record model="ir.ui.view" id="pos_order_inherit_pos_1">
      <field name="model">pos.order</field>
      <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
      <field name="arch" type="xml">
          <xpath expr="//sheet//group[@name='order_fields']/field[@name='user_id']" position="after">
            <field name="delivery_agent" readonly="True"/>
            <field name="date_delivery" readonly="True"/>  
          </xpath>
          <field name="delivery_agent" position="after">
                <field name="delivery_phone" string="Telephone Livreur"/>
          </field>
          <xpath expr="//sheet" position="after">
               <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers" />
                <field name="message_ids" widget="mail_thread" />
               </div>
          </xpath>
      </field>
    </record>
      
      <record id="view_pos_hta_filter" model="ir.ui.view">
            <field name="name">hta.pos.filter</field>
            <field name="model">pos.order</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
                <search string="Search expense">
                    <field name="customer_Phone" string="Numero Client"/>
                    <field name="partner_id" string="Client"/>
                    <field name="name" string="Reference Commande"/>
                    <field name="create_date" string="Date commande"/>
                    <field name="user_return" string="Gestionnaire stock"/>
                    <field name="pos_reference" string="Numero du reçu"/>
                    <field name="delivery_agent" string="Livreur"/>
                    <filter name="state" string="Facturé" domain="[('state','=','invoiced')]"/>
                    <filter name="date_order" string="Date de la commande"/>
                    <group expand="1" string="Grouper par">
                        
                        <filter name="session_id" string="Session" context="{'group_by':'session_id'}"/>
                        <filter name="delivery_agent" string="Livreur" context="{'group_by':'delivery_agent'}"/>
                        <filter name="user_id" string="Caissier" context="{'group_by':'user_id'}"/>
                        <filter name="partner_id" string="Client" context="{'group_by':'partner_id'}"/>
                    </group>
                </search>
            </field>
      </record>

      <record model="ir.ui.view" id="pos_order_inherit_pos_tree">
      <field name="model">pos.order</field>
      <field name="inherit_id" ref="point_of_sale.view_pos_order_tree"/>
      <field name="arch" type="xml">
          <xpath expr="//tree" position="replace">
            <tree string="POS Orders" create="0" sample="1" default_order="id desc" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'" decoration-warning="state == 'delivery'">
                <field name="currency_id" invisible="1"/>
                <field name="name" decoration-bf="1"/>
                <field name="session_id" optional="hide"/>
                <field name="create_date" string="Date commande"/>
                <field name="payment_date" string="Date de payment"/>
                <field name="pos_reference"/>
                <field name="partner_id"/>
                <field name="customer_Phone" string="Telephone Client"/>
                <field name="delivery_agent"/>
                <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                <field name="amount_total" sum="Amount total" widget="monetary" decoration-bf="1"/>
                <field name="state" widget="badge" decoration-warning="state == 'delivery'" decoration-muted="state == 'return'"
                    decoration-success="state == 'paid' or state == 'done' or state == 'invoiced'" invisible="1"/>
                <field name="delivery_status" widget="badge" decoration-warning="state == 'draft'" decoration-muted="state == 'cancel'" decoration-success="state == 'invoiced' or state == 'direct'"/>
                <field name="payment_status" string="Payement" optional="show"/>
                <field name="amount_discount" string="Remise" optional="show" sum="total_discount"/>
                <field name="amount_due" string="Créance" optional="show" sum="total_due"/>
                <field name="audit" widget="badge" decoration-warning="audit == 'draft'" decoration-danger="audit == 'no_valide'" decoration-success="audit == 'valide'"/>
                <field name="date_audit" string="Date Audit" groups="account.group_account_manager"/>
                <field name="audit_valideur" string="Valideur" groups="account.group_account_manager"/>
            </tree>
          </xpath>
          <xpath expr="." position="inside">
            <header>
                <button string="Assigner la commande" type="object" name="assign_command_wizard" groups="hta_pos.group_pos_delivery_manager"/>
                <button string="Passer au paiement" type="object" name="payment_wizard_order" groups="hta_pos.group_pos_delivery_manager"/>
                <!--<button string="Actualisé" type="object" name="order_actualise"/>-->
                <button string="AUDIT VALIDÉE" type="object" name="audit_valid" groups="hta_pos.group_pos_audit_user"/>
                <button string="AUDIT INVALIDÉE" type="object" name="audit_invalid" groups="hta_pos.group_pos_audit_user"/>
                <button string="AUDIT AVEC DATE" type="object" name="audit_order_wizard" groups="hta_pos.group_pos_audit_user"/>
                <!--<button string="Retour" type="object" name="return_order_pos" groups="account.group_account_manager"/>-->
            </header>
          </xpath>
      </field>
    </record> 
  </data>
</odoo>