<?xml version="1.0"?>
<odoo>
	<data>

		<!-- Claims Category Form View  -->
		<record id="crm_claim_category_form" model="ir.ui.view">
			<field name="name">crm.claim.category.form</field>
			<field name="model">crm.claim.category</field>
			<field name="arch" type="xml">
				<form string="Claim Categories">
					<group>
						<field name="name"/>
						<field name="team_id"/>
					</group>
				</form>
			</field>
		</record>

		<!-- Claims Category Tree View  -->
		<record id="crm_claim_category_tree" model="ir.ui.view">
			<field name="name">crm.claim.category.tree</field>
			<field name="model">crm.claim.category</field>
			<field name="arch" type="xml">
				<tree string="Claim Categories">
					<field name="name"/>
					<field name="team_id"/>
				</tree>
			</field>
		</record>

		<!-- Claims Category Action -->
		<record id="crm_claim_categ_action" model="ir.actions.act_window">
			<field name="name">Claim Categories</field>
			<field name="res_model">crm.claim.category</field>
			<field name="binding_view_types">form</field>
			<field name="view_id" ref="crm_claim_category_tree"/>
			<field name="help" type="html">
			  <p class="oe_view_nocontent_create">
				Cliquez pour créer une catégorie de demande.
			  </p><p>
				Créez des catégories de réclamations pour mieux gérer et classer vos
réclamations. Voici quelques exemples de réclamations : action préventive,
action corrective.
			  </p>
			</field>
		</record>


		<!-- Claim Stages Tree View -->
		<record id="crm_claim_stage_tree" model="ir.ui.view">
			<field name="name">crm.claim.stage.tree</field>
			<field name="model">crm.claim.stage</field>
			<field name="arch" type="xml">
				<tree string="Claim Stages">
					<field name="sequence"/>
					<field name="name"/>
				</tree>
			</field>
		</record>

		<!-- Claim Stages Form View -->
		<record id="crm_claim_stage_form" model="ir.ui.view">
			<field name="name">crm.claim.stage.form</field>
			<field name="model">crm.claim.stage</field>
			<field name="arch" type="xml">
				<form string="Claim Stage">
					<group col="4">
						<field name="name"/>
						<field name="case_default"/>
						<field name="sequence"/>
					</group>
				</form>
			</field>
		</record>

		<!-- Claim Stages Action -->
		<record id="crm_claim_stage_act" model="ir.actions.act_window">
			<field name="name">Claim Stages</field>
			<field name="res_model">crm.claim.stage</field>
			<field name="binding_view_types">form</field>
			<field name="view_id" ref="crm_claim_stage_tree"/>
			<field name="help" type="html">
			  <p class="oe_view_nocontent_create">
				Cliquez pour paramétrer une nouvelle étape dans le traitement des réclamations.
			  </p><p>
				Vous pouvez créer des étapes de réclamation pour catégoriser le statut de chaque
demande saisie dans le système. Les étapes définissent toutes les étapes
nécessaires à la résolution d'un sinistre.
			  </p>
			</field>
		</record>
	
		<!-- CRM Claims Tree View -->
		<record model="ir.ui.view" id="crm_case_claims_tree_view1">
			<field name="name">CRM - Claims Tree</field>
			<field name="model">crm.claim</field>
			<field name="arch" type="xml">
				<tree string="Claims">
					<field name="name" />
					<field name="partner_id"/>
					<field name="user_id"/>
					<field name="date"/>
					<field name="stage_id"/>
					<field name="date_action_next"/>
					<field name="action_next"/>
					<field name="categ_id" string="Type"/>
					<field name="date_deadline" invisible="1"/>
					<field name="date_closed" invisible="1"/>
				</tree>
			</field>
		</record>

		<!-- CRM Claims Form View -->
		<record model="ir.ui.view" id="crm_case_claims_form_view1">
			<field name="name">CRM - Claims Form</field>
			<field name="model">crm.claim</field>
			<field name="arch" type="xml">
				<form string="Réclamation">
				<header>
					<field name="stage_id" widget="statusbar" options="{'clickable': '1'}"  />
				</header>
				<sheet string="Réclamation">
					<group>
						<field name="name" />
						<field name="date"/>
					</group>
					<group colspan="4" col="4" groups="base.group_user">
						<field name="user_id" context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager']}"/>
						<field name="priority" widget="priority"/>
						<field name="team_id"/>
						<field name="date_deadline"/>
					</group>
					<group colspan="4" col="4">
						<notebook>
							<page string="Description de la réclamation" >
								<group colspan="2" col="2" groups="base.group_user">
									<separator colspan="2" string="Reporter de réclamation"/>
									<field name="partner_id" string="Client(e)" options="{'no_create': True}"
										/>
									<field name="partner_phone"/>
									<field name="email_from" widget="email"/>
								</group>
                                <group colspan="2" col="2" groups="base.group_user">
									<separator colspan="2" string="Article"/>
<!-- 									<field name="user_fault"/> -->
                                       <field name="product_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}" placeholder="Produit acheté..." string="Produits"/>
							
									<!--<field name="ref"/>-->
								</group>
								<group colspan="2" col="2" groups="base.group_user">
									<separator colspan="2" string="Responsabilités"/>
<!-- 									<field name="user_fault"/> -->
									<field name="categ_id" options="{'no_create': True, 'no_open': True}"/>
									<!--<field name="ref"/>-->
								</group>
								<separator colspan="4" string="Réclamation/Action Description" groups="base.group_user"/>
								<field name="description" colspan="4" nolabel="1"/>
							</page>
							<page string="Suivi" groups="base.group_user">
								<group colspan="2" col="2">
									<separator colspan="2" string="Actions"/>
									<field name="date_action_next" string="Date de la prochaine action"/>
									<field name="action_next" string="Prochaine action"/>
								</group>
								<group colspan="2" col="2" groups="base.group_user">
									<separator colspan="2" string="Dates"/>
									<field name="create_date"/>
									<field name="date_closed" invisible="1"/>
									<field name="write_date"/>
								</group>

								<group colspan="2" col="2">
									<separator colspan="2" string="Causes profondes"/>
									<field name="cause" colspan="2" nolabel="1"/>
								</group>
								<group colspan="2" col="2">
									<separator colspan="2" string="Mesures de résolution"/>
									<field name="type_action"/>
									<field name="resolution" colspan="2" nolabel="1" placeholder="Description de l'action..."/>
								</group>
							</page>
						</notebook>
					</group>
				</sheet>
				<div class="oe_chatter">
					<field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
					<field name="message_ids" widget="mail_thread"/>
				</div>
				</form>
			</field>
		</record>

		<!-- Claim Calendar view -->
		<record model="ir.ui.view" id="crm_case_claims_calendar_view1">
			<field name="name">Claims Actions</field>
			<field name="model">crm.claim</field>
			<field name="priority" eval="2"/>
			<field name="arch" type="xml">
				<calendar string="Claims" date_start="date_action_next" color="user_id">
					<field name="name"/>
				</calendar>
			</field>
		</record>

		<!-- CRM Claims Action -->
		<record model="ir.actions.act_window" id="crm_claim_view_act1">
			<field name="name">Claims</field>
			<field name="res_model">crm.claim</field>
			<field name="binding_view_types">form</field>
			<field name="view_mode">tree,form,calendar</field>
			<field name="view_id" ref="crm_case_claims_tree_view1"/>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Enregistrez et suivez les réclamations de vos clients. Les réclamations peuvent être liées à une commande client ou à un lot. Vous pouvez envoyer des e-mails avec pièces jointes et conserver l'historique complet d'une réclamation (e-mails envoyés, type d'intervention, etc.). Les réclamations peuvent être automatiquement liées à une adresse e-mail à l'aide de la passerelle de messagerie. module.
				</p>
			</field>
		</record>
        <record id="view_pos_hta_filter" model="ir.ui.view">
            <field name="name">Claims</field>
            <field name="model">crm.claim</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
                <search string="Recherche">
                    <field name="partner_id" string="Client(e)"/>
                    <field name="partner_phone" string="Numéro Client(e)"/>
                    <field name="action_next" string="Action (Produit)"/>
                    <group expand="1" string="Grouper par">
                        <filter name="partner_id" string="Client(e)" context="{'group_by':'partner_id'}"/>
                        <filter name="partner_phone" string="Numéro Client(e)" context="{'group_by':'partner_phone'}"/>
                    </group>
                </search>
            </field>
      </record>

		<record model="ir.actions.act_window.view" id="action_crm_tag_tree_claim0">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="crm_case_claims_tree_view1"/>
			<field name="act_window_id" ref="crm_claim_view_act1"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="action_crm_tag_calendar_claim0">
			<field name="sequence" eval="2"/>
			<field name="view_mode">calendar</field>
			<field name="view_id" ref="crm_case_claims_calendar_view1"/>
			<field name="act_window_id" ref="crm_claim_view_act1"/>
		</record>

		<record model="ir.actions.act_window.view" id="action_crm_tag_form_claim0">
			<field name="sequence" eval="3"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="crm_case_claims_form_view1"/>
			<field name="act_window_id" ref="crm_claim_view_act1"/>
		</record>
		      

        <!-- Claims -->
		<menuitem id="menu_after_sale" name="Après vente" 
			action="crm_claim_stage_act" parent="crm.crm_menu_sales"/>

<!-- 	<menuitem id="service_menu" name="Services" 
			action="crm_claim_view_act1" groups="base.group_no_one" parent="bi_crm_claim.menu_after_sale" sequence="1"/> -->

		<menuitem id="claims_menu" name="Réclamations" 
			action="crm_claim_view_act1" parent="bi_crm_claim.menu_after_sale" sequence="1"/>


		<!-- Claim Category and Stages -->
		<menuitem id="menu_config_claim" name="Réclamations" 
			 parent="crm.crm_menu_sales"/>

		<menuitem action="crm_claim_categ_action" name="Categories"
			id="menu_crm_case_claim-act" parent="menu_config_claim"/>

		<menuitem id="menu_claim_stage_view" name="Étapes" action="crm_claim_stage_act" parent="menu_config_claim" />

	</data>
</odoo>
